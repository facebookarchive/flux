<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/flux/main.348a05006f38e96b626e.css","/flux/main.2dc5418e03370a1e19b6.js"],"component---site-src-pages-index-jsc-4-f-f99":["/flux/component---site-src-pages-index-jsc-4-f-f99.9f99729bff7f082bd679.css","/flux/component---site-src-pages-index-jsc-4-f-f99.7e2f8c8c9393a4596a64.js"],"component---site-src-pages-support-jsab-9-40d":["/flux/component---site-src-pages-support-jsab-9-40d.9f99729bff7f082bd679.css","/flux/component---site-src-pages-support-jsab-9-40d.a9f88306b06d58dc7a9e.js"],"component---theme-doc-page-1-be-9be":[],"docsMetadata---flux-docs-10-c-297":["/flux/docsMetadata---flux-docs-10-c-297.546aee266c4453d45332.js"],"component---theme-doc-item-178-a40":["/flux/component---theme-doc-item-178-a40.de2648345892298aff25.css","/flux/component---theme-doc-item-178-a40.b139630bf6cfa0630fef.js"],"content---flux-docs-overview-63-d-bb7":["/flux/content---flux-docs-overview-63-d-bb7.a5535c769991f39d48de.js"],"metadata---flux-docs-overview-66-d-5f5":["/flux/metadata---flux-docs-overview-66-d-5f5.a1f326b96ebc1b93172a.js"],"content---flux-docs-flux-utils-793-5b2":["/flux/content---flux-docs-flux-utils-793-5b2.e4c16eefb4cb9805f5a7.js"],"metadata---flux-docs-flux-utilsad-2-1a3":["/flux/metadata---flux-docs-flux-utilsad-2-1a3.ac2d3ab81ac930b6c084.js"],"content---flux-docs-dispatcher-973-002":["/flux/content---flux-docs-dispatcher-973-002.eb86055d89dba0a6b0c9.js"],"metadata---flux-docs-dispatcher-50-a-798":["/flux/metadata---flux-docs-dispatcher-50-a-798.e8b61c2c01afcea8b887.js"],"content---flux-docs-overview-ko-kr-963-bdd":["/flux/content---flux-docs-overview-ko-kr-963-bdd.933d063e80f247d88564.js"],"metadata---flux-docs-overview-ko-kr-2-e-0-2e2":["/flux/metadata---flux-docs-overview-ko-kr-2-e-0-2e2.1b51fe507549ff85a4ed.js"],"content---flux-docs-videos-442-873":["/flux/content---flux-docs-videos-442-873.42ccffa85c3ba150e191.js"],"metadata---flux-docs-videos-441-5cc":["/flux/metadata---flux-docs-videos-441-5cc.9b5b180a89723210b246.js"],"content---flux-docs-in-depth-overview-217-711":["/flux/content---flux-docs-in-depth-overview-217-711.569931098d78fee7f7c8.js"],"metadata---flux-docs-in-depth-overview-35-b-9f2":["/flux/metadata---flux-docs-in-depth-overview-35-b-9f2.03cdaf65182b2372f021.js"],"content---flux-docs-dispatcher-ko-kr-59-b-611":["/flux/content---flux-docs-dispatcher-ko-kr-59-b-611.514410d0965b57fe5c71.js"],"metadata---flux-docs-dispatcher-ko-k-rd-2-d-792":["/flux/metadata---flux-docs-dispatcher-ko-k-rd-2-d-792.c59ec2a75248bef06bd0.js"],"content---flux-docs-related-libraries-81-b-9f6":["/flux/content---flux-docs-related-libraries-81-b-9f6.4b24a052f25b19cd4497.js"],"metadata---flux-docs-related-librariesc-1-a-55b":["/flux/metadata---flux-docs-related-librariesc-1-a-55b.ab9f2deee66e4a516087.js"],"content---flux-docs-videos-ko-kr-5-b-6-020":["/flux/content---flux-docs-videos-ko-kr-5-b-6-020.63492e4dff5ae4c0776c.js"],"metadata---flux-docs-videos-ko-kr-560-c0b":["/flux/metadata---flux-docs-videos-ko-kr-560-c0b.dc236c71ae1f6149a09d.js"]};/*]]>*/</script>

<title data-react-helmet="true">Flux Utils</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Flux · Application architecture for building user interfaces"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are **not** a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs."/><meta data-react-helmet="true" property="og:description" content="Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are **not** a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs."/><meta data-react-helmet="true" property="og:url" content="https://facebook.github.io/flux/docs/flux-utils"/>

<link data-react-helmet="true" rel="shortcut icon" href="/flux/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/flux/main.348a05006f38e96b626e.css" />

<link rel="stylesheet" type="text/css" href="/flux/0.3bfe0c00301494d2e2b7.css" />

<link rel="stylesheet" type="text/css" href="/flux/25.7c23baa63a555a329cbb.css" />

<link rel="stylesheet" type="text/css" href="/flux/component---theme-doc-item-178-a40.de2648345892298aff25.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/flux/"><img class="navbar__logo" src="/flux/img/flux-logo-color.svg" alt="Flux Logo"/><strong class="">Flux</strong></a><a class="navbar__item navbar__link" label="Docs" position="left" href="/flux/docs/overview">Docs</a><a class="navbar__item navbar__link" label="Support" position="left" href="/flux/support">Support</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://github.com/facebook/flux" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/flux/"><img class="navbar__logo" src="/flux/img/flux-logo-color.svg" alt="Flux Logo"/><strong>Flux</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" position="left" href="/flux/docs/overview">Docs</a></li><li class="menu__list-item"><a class="menu__link" label="Support" position="left" href="/flux/support">Support</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/facebook/flux" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Quick Start</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/flux/docs/in-depth-overview">In-Depth Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/dispatcher">Dispatcher</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/flux/docs/flux-utils">Flux Utils</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/videos">Videos</a></li><li class="menu__list-item"><a class="menu__link" href="/flux/docs/related-libraries">Related Libraries</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">Flux Utils</h1></header><article><div class="markdown"><p>Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are <strong>not</strong> a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs.</p><h2><a aria-hidden="true" class="anchor" id="usage"></a><a aria-hidden="true" class="hash-link" href="#usage">#</a>Usage</h2><p>There are three main classes exposed in Flux Utils:</p><ol><li><code>Store</code></li><li><code>ReduceStore</code></li><li><code>Container</code></li></ol><p>These base classes can be imported from <code>flux/utils</code> like this:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">ReduceStore</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flux/utils&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">CounterStore</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ReduceStore</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">getInitialState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">reduce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">action</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;square&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword module" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="best-practices"></a><a aria-hidden="true" class="hash-link" href="#best-practices">#</a>Best practices</h2><p>There are some best practices we try to follow when using these classes:</p><h3><a aria-hidden="true" class="anchor" id="stores"></a><a aria-hidden="true" class="hash-link" href="#stores">#</a>Stores</h3><ul><li>Cache data</li><li>Expose public getters to access data (never have public setters)</li><li>Respond to specific actions from the dispatcher</li><li>Always emit a change when their data changes</li><li>Only emit changes during a dispatch</li></ul><h3><a aria-hidden="true" class="anchor" id="actions"></a><a aria-hidden="true" class="hash-link" href="#actions">#</a>Actions</h3><p>Describe a user&#x27;s action, are not setters. (e.g. <code>select-page</code> not <code>set-page-id</code>)</p><h3><a aria-hidden="true" class="anchor" id="containers"></a><a aria-hidden="true" class="hash-link" href="#containers">#</a>Containers</h3><ul><li>Are React components that control a view</li><li>Primary job is to gather information from stores and save it in their state</li><li>Have no <code>props</code> and no UI logic</li></ul><h3><a aria-hidden="true" class="anchor" id="views"></a><a aria-hidden="true" class="hash-link" href="#views">#</a>Views</h3><ul><li>Are React components that are controlled by a container</li><li>Have all of the UI and rendering logic</li><li>Receive all information and callbacks as props</li></ul><h2><a aria-hidden="true" class="anchor" id="api"></a><a aria-hidden="true" class="hash-link" href="#api">#</a>API</h2><h3><a aria-hidden="true" class="anchor" id="store"></a><a aria-hidden="true" class="hash-link" href="#store">#</a><code>Store</code></h3><h4><a aria-hidden="true" class="anchor" id="constructordispatcher-dispatcher"></a><a aria-hidden="true" class="hash-link" href="#constructordispatcher-dispatcher">#</a><code>constructor(dispatcher: Dispatcher)</code></h4><p>Constructs and registers an instance of this store with the given dispatcher.</p><h4><a aria-hidden="true" class="anchor" id="addlistenercallback-function-remove-function"></a><a aria-hidden="true" class="hash-link" href="#addlistenercallback-function-remove-function">#</a><code>addListener(callback: Function): {remove: Function}</code></h4><p>Adds a listener to the store, when the store changes the given callback will be called. A token is returned that can be used to remove the listener. Calling the <code>remove()</code> function on the returned token will remove the listener.</p><h4><a aria-hidden="true" class="anchor" id="getdispatcher-dispatcher"></a><a aria-hidden="true" class="hash-link" href="#getdispatcher-dispatcher">#</a><code>getDispatcher(): Dispatcher</code></h4><p>Returns the dispatcher this store is registered with.</p><h4><a aria-hidden="true" class="anchor" id="getdispatchtoken-dispatchtoken"></a><a aria-hidden="true" class="hash-link" href="#getdispatchtoken-dispatchtoken">#</a><code>getDispatchToken(): DispatchToken</code></h4><p>Returns the dispatch token that the dispatcher recognizes this store by. Can be used to <code>waitFor()</code> this store.</p><h4><a aria-hidden="true" class="anchor" id="haschanged-boolean"></a><a aria-hidden="true" class="hash-link" href="#haschanged-boolean">#</a><code>hasChanged(): boolean</code></h4><p>Ask if a store has changed during the current dispatch. Can only be invoked while dispatching. This can be used for constructing derived stores that depend on data from other stores.</p><h4><a aria-hidden="true" class="anchor" id="__emitchange-void"></a><a aria-hidden="true" class="hash-link" href="#__emitchange-void">#</a><code>__emitChange(): void</code></h4><p>Emit an event notifying all listeners that this store has changed. This can only be invoked when dispatching. Changes are de-duplicated and resolved at the end of this store&#x27;s <code>__onDispatch</code> function.</p><h4><a aria-hidden="true" class="anchor" id="ondispatchpayload-object-void"></a><a aria-hidden="true" class="hash-link" href="#ondispatchpayload-object-void">#</a><code>onDispatch(payload: Object): void</code></h4><p>Subclasses must override this method. This is how the store receives actions from the dispatcher. All state mutation logic must be done during this method.</p><hr/><h3><a aria-hidden="true" class="anchor" id="reducestoret"></a><a aria-hidden="true" class="hash-link" href="#reducestoret">#</a><code>ReduceStore&lt;T&gt;</code></h3><p>This class extends the base <code>Store</code>.</p><h4><a aria-hidden="true" class="anchor" id="getstate-t"></a><a aria-hidden="true" class="hash-link" href="#getstate-t">#</a><code>getState(): T</code></h4><p>Getter that exposes the entire state of this store. If your state is not immutable you should override this and not expose state directly.</p><h4><a aria-hidden="true" class="anchor" id="getinitialstate-t"></a><a aria-hidden="true" class="hash-link" href="#getinitialstate-t">#</a><code>getInitialState(): T</code></h4><p>Constructs the initial state for this store. This is called once during construction of the store.</p><h4><a aria-hidden="true" class="anchor" id="reducestate-t-action-object-t"></a><a aria-hidden="true" class="hash-link" href="#reducestate-t-action-object-t">#</a><code>reduce(state: T, action: Object): T</code></h4><p>Reduces the current state, and an action to the new state of this store. All subclasses must implement this method. This method should be pure and have no side-effects.</p><h4><a aria-hidden="true" class="anchor" id="areequalone-t-two-t-boolean"></a><a aria-hidden="true" class="hash-link" href="#areequalone-t-two-t-boolean">#</a><code>areEqual(one: T, two: T): boolean</code></h4><p>Checks if two versions of state are the same. You do not need to override this if your state is immutable.</p><h4><a aria-hidden="true" class="anchor" id="doesnt-need-to-emit-a-change"></a><a aria-hidden="true" class="hash-link" href="#doesnt-need-to-emit-a-change">#</a>Doesn&#x27;t Need to Emit a Change</h4><p>Note that any store that extends <code>ReduceStore</code> does not need to manually emit changes in <code>reduce()</code> (you still can if you want to though). The state is compared before and after each dispatch and changes are emitted automatically. If you need to control this behavior (perhaps because your state is mutable) override <code>areEqual()</code>.</p><hr/><h3><a aria-hidden="true" class="anchor" id="container"></a><a aria-hidden="true" class="hash-link" href="#container">#</a><code>Container</code></h3><h4><a aria-hidden="true" class="anchor" id="createbase-reactclass-options-object-reactclass"></a><a aria-hidden="true" class="hash-link" href="#createbase-reactclass-options-object-reactclass">#</a><code>create(base: ReactClass, options: ?Object): ReactClass</code></h4><p>Create is used to transform a react class into a container that updates its state when relevant stores change. The provided base class must have static methods <code>getStores()</code> and <code>calculateState()</code>.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Container</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flux/utils&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">CounterContainer</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getStores</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token maybe-class-name">CounterStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">calculateState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">prevState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token maybe-class-name">CounterStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">CounterUI</span><span class="token plain"> counter</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> container </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">CounterContainer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Additional options may be provided when creating your container in order to control certain behaviors.</p><ul><li><p><strong>Containers are pure</strong> - By default containers are pure, meaning they will not re-render when their props and state do not change (as determined by <code>shallowEquals()</code>). To disable this behavior pass options <code>{pure: false}</code> as the second argument to <code>create()</code>.</p></li><li><p><strong>Containers cannot access props</strong> - By default containers are not able to access any props. This is both for performance reasons, and to ensure that containers are re-usable and props do not have to be threaded throughout a component tree. There are some valid situations in which you need to determine your state based on both props and a store&#x27;s state. In those situations pass options <code>{withProps: true}</code> as the second argument to <code>create()</code>. This will expose the components props as the second argument to <code>calculateState()</code>.</p></li></ul><p>If you are unable to utilize react classes most of this functionality is also mirrored in a mixin. <code>import {Mixin} from &#x27;flux/utils&#x27;;</code></p><h2><a aria-hidden="true" class="anchor" id="using-flux-with-react-hooks"></a><a aria-hidden="true" class="hash-link" href="#using-flux-with-react-hooks">#</a>Using Flux with React Hooks</h2><p>React 16.8 introduced <a href="https://reactjs.org/docs/hooks-intro.html">Hooks</a>. Much of the functionality of Flux and Flux Utils can be reproduced using <a href="https://reactjs.org/docs/hooks-reference.html#usecontext">useContext</a> &amp; <a href="https://reactjs.org/docs/hooks-reference.html#usereducer">useReducer</a>.</p><h2><a aria-hidden="true" class="anchor" id="existing-projects-with-storereducestore"></a><a aria-hidden="true" class="hash-link" href="#existing-projects-with-storereducestore">#</a>Existing Projects with <code>Store</code>/<code>ReduceStore</code></h2><p>If you have existing projects that need to continue using Flux Util&#x27;s Stores, you can use the <a href="https://github.com/Fieldscope/flux-hooks">flux-hooks</a> package.
Access the store using useFluxStore which provides an API similar to <a href="#container">Container</a>&#x27;s calculateState.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/flux/edit/master/docs/Flux-Utils.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated<!-- --> <!-- -->on<!-- --> <strong>2019-7-4</strong> <!-- -->by <strong>Yangshun Tay</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/flux/docs/dispatcher"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Dispatcher</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/flux/docs/videos"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Videos<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#usage" class="contents__link">Usage</a></li><li><a href="#best-practices" class="contents__link">Best practices</a><ul class=""><li><a href="#stores" class="contents__link">Stores</a></li><li><a href="#actions" class="contents__link">Actions</a></li><li><a href="#containers" class="contents__link">Containers</a></li><li><a href="#views" class="contents__link">Views</a></li></ul></li><li><a href="#api" class="contents__link">API</a><ul class=""><li><a href="#store" class="contents__link">Store</a></li><li><a href="#reducestoret" class="contents__link">ReduceStore&lt;T&gt;</a></li><li><a href="#container" class="contents__link">Container</a></li></ul></li><li><a href="#using-flux-with-react-hooks" class="contents__link">Using Flux with React Hooks</a></li><li><a href="#existing-projects-with-storereducestore" class="contents__link">Existing Projects with Store/ReduceStore</a></li></ul></div></div></div></div></div></div></main></div>
</div>

<script type="text/javascript" src="/flux/runtime~main.4acbfc72ff0d44e42d5c.js"></script>

<script type="text/javascript" src="/flux/main.2dc5418e03370a1e19b6.js"></script>

<script type="text/javascript" src="/flux/0.7808659e75d8d8095d6d.js"></script>

<script type="text/javascript" src="/flux/25.ad0245253ff450fedf2a.js"></script>

<script type="text/javascript" src="/flux/docsMetadata---flux-docs-10-c-297.546aee266c4453d45332.js"></script>

<script type="text/javascript" src="/flux/component---theme-doc-item-178-a40.b139630bf6cfa0630fef.js"></script>

<script type="text/javascript" src="/flux/content---flux-docs-flux-utils-793-5b2.e4c16eefb4cb9805f5a7.js"></script>

<script type="text/javascript" src="/flux/metadata---flux-docs-flux-utilsad-2-1a3.ac2d3ab81ac930b6c084.js"></script>

</body>
</html>